<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="./jiboard.css" rel="stylesheet">
    <title>JIBoard</title>
</head>
<body>
    <div id="startPopUp">
      <p>
      Click or poke the dots to play them. The stronger the color, the closer,
      harmonically speaking, that tone is to the root tone, circled in black.
      </p>
      <p>
      Click ? (top left) for more info, or ⚙ (top right) to tinker.
      </p>
    </div>

    <div id="divHelpOverlay">
      <p class="helpQuestion">
      What is this thing?
      </p>
      <p class="helpAnswer">
      It's a keyboard for playing music in an unusual tuning system, called just
      intonation. I call it Jiboard.
      </p>
      <p class="helpQuestion">
      Why would I want to play music in this "just intonation" tuning?
      </p>
      <p class="helpAnswer">
      Because it sounds more harmonious, or as music nerds would say, consonant (the
      opposite of dissonant), than the tuning system that all modern music uses. In a
      sense, all modern music is out of tune, because the tuning system itself that it's
      all based on is a bit off.
      </p>
      <p class="helpQuestion">
      Wait, what?! Are you saying that all modern instruments are tuned wrong?
      </p>
      <p class="helpAnswer">
      Well, not wrong, but it's not the most consonant way of tuning your instruments,
      it's imperfect. Let me explain.
      </p>
      <p class="helpAnswer">
      We are used to the idea that all music is built out of tones like C or A♯. But what
      exactly is a C? A C played by a violin or a Casio synth sound very different, but
      what they have in common is that they have the same pitch. And the pitch of a sound
      is just the frequency of oscillations in that sound: Higher pitch, higher
      frequency. So that's the definition of, say, middle C: It's sound the oscillates at
      the frequency of 261.626 Hz.
      </p>
      <p class="helpAnswer">
      So if you want to build yourself a brand new tuning system, you need to
      choose a set of frequencies that you define to be your tones, and then music in
      that tuning system will consist of playing those tones in various ways. In the
      common Western tuning system we choose 12 tones within each octave, and give them
      the names C, C♯, D, etc., but you could pick some different number of tones and
      name them however you want. The point is to have a set of fixed frequencies that
      are the building blocks of your music.
      </p>
      <p class="helpAnswer">
      Here's one way we might build a tuning system. Start by fixing one tone, call it
      A, to have a frequency of 440Hz. That will be the root tone, the harmonic centre of
      the tuning system, and we'll choose the other frequencies in relation to this one.
      </p>
      <p class="helpAnswer">
      Next, go looking for other frequencies that sound pleasant to the human ear when
      played together with the A of 440Hz. (After all, we presumably want the music we
      play to sound pretty.) You'll most probably quickly land on 220Hz and 880Hz, so
      double and half of the root frequency. In fact, to the human ear these sound so
      naturally resonant together with the A at 440Hz, and they too, are usually called
      A, but just one octave below (220Hz) and above (880Hz) the original one. So the
      interval of an octave just means that the frequencies of two tones are related by a
      ratio of ²⁄₁.
      </p>
      <p class="helpAnswer">
      Once you've added those to your tuning system, and go look for more frequencies
      that ring nicely and consonantly with the ones you already have, you'll find that
      all the ones that are related to the root tone of 440Hz by simple ratios stand out.
      ³⁄₂ · 440Hz = 660Hz and ⁴⁄₃ · 440Hz ≈ 587Hz are usually called the perfect fifth
      and perfect fourth of the A at 440Hz, because they resonate so beautifully with it.
      Note that whether the frequency expressed in Hz is a "round number" has nothing to
      do with this: What matters is that the <span class=emph>ratio</span> of the
      frequencies is something simple, like ³⁄₂.
      </p>
      <p class="helpAnswer">
      The list of simple ratios goes on: ⁵⁄₄ gives the interval called major third, ⁶⁄₅
      is a minor third, etc. The more complicated the ratios get, the less consonant
      they start to sound. For instance, two tones with frequencies related by a ratio of
      ⁶⁵⁄₅₃ probably aren't going to sound especially harmonious together.
      </p>
      <p class="helpAnswer">
      You could give some of these tones familiar names, like if A is 440Hz then many
      people would call the tone at ³⁄₂ · 440Hz = 660Hz E. I personally prefer to just
      label the tones by the ratios, so call call them ¹⁄₁ and ³⁄₂ instead of A and E.
      </p>
      <p class="helpAnswer">
      So this way, starting from a single tone with a fixed frequency, for instance our A
      at 440Hz, you can generate a whole tuning system by including all the tones whose
      frequencies are of the form of a some simple ratio times 440Hz. What exactly counts
      as simple, is in the ear of the listener. You most probably want ²⁄₁, ³⁄₂, and
      ⁴⁄₃, as well as inverses and multiples of theirs, like ½ and ⁸⁄₃. Most people would
      probably include ⁶⁄₅ and ⁵⁄₄ too. Maybe also for instance ⁹⁄₈ and ¹⁶⁄₉. If you are
      adventurous, you can try ⁷⁄₄ or ¹⁶⁄₁₁ as well. Whatever pleases you ears.
      </p>
      <p class="helpAnswer">
      A tuning system like this, is called a just intonation tuning.
      </p>
      <p class="helpQuestion">
      I'm not sure I understand. You are multiplying all these ratios by 440Hz to get
      these frequencies you say sound harmonious together, but what's the importance of
      440Hz?
      </p>
      <p class="helpAnswer">
      Nothing at all! 440Hz happens to be the frequency to which most musicians are used
      to tuning their middle A, but it's an entirely arbitrary number. You could just as
      well choose 123Hz or 666Hz. The magic is all in the ratios. See, unless you are one
      of the very few people with with so called "absolute pitch" ability, humans can't
      really tell whether the frequency of some tone they hear is 440Hz or 450Hz or
      something else in the same ballpark. But what they <span class=emph>can</span> tell
      with great accuracy, is the relation between two frequencies that they hear at the
      same time, or in close succession.
      </p>
      <p class="helpAnswer">
      So the root frequency that we chose to be 440 Hz is arbitrary, but the special
      status of tones related by simple fractions comes directly from some simple physics
      of sound waves: When you play at the same time two frequencies related by a a ratio
      like ³⁄₂, the two sound waves interact in a particular way (keywords: resonance,
      interference), so that the result sounds like more than the sum of its parts, and
      the combined sound has special qualities that people find beautiful and
      interesting. This special nature of simple fractions is literally what all of
      harmony is about!
      </p>
      <p class="helpQuestion">
      Okay, that makes sense. But this ratio-based just intonation isn't the way we
      usually tune our instruments then?
      </p>
      <p class="helpAnswer">
      Not at all! The usual (Western) tuning system that's probably used by all music
      you've ever heard works like this: Take the octave, the ratio of ²⁄₁, and split it
      into 12 equal parts, and those are your tones. So, starting again from the A at
      440Hz, you would include A♯ at 2<sup>¹⁄₁₂</sup> · 440Hz, B at 2<sup>²⁄₁₂</sup> ·
      440Hz, etc., all the way to G♯ at 2<sup>¹¹⁄₁₂</sup> · 440Hz and the next A at
      2<sup>¹²⁄₁₂</sup> · 440Hz = 880Hz. This system is called the 12-EDO (Equal Division
      of Octave) or 12-TET (12-Tone Equal Temperament) tuning.
      </p>
      <p class="helpQuestion">
      But why on Earth does that work at all? You just said that to get tones that sound
      nice and consonant together you need the frequencies to be related by simple
      ratios, but numbers like 2<sup>³⁄₁₂</sup> are not simple ratios at all!
      </p>
      <p class="helpAnswer">
      That's true, but the magic of the 12-EDO tuning system is that they happen to be
      pretty good approximations to the simple ratios. For instance, 2<sup>⁷⁄₁₂</sup> ≈
      1.498 is very close ³⁄₂ = 1.5. In practice, the human ear usually can't hear
      a difference that small. A little less perfect is the 12-EDO idea of what counts as
      a major third: 2<sup>⁴⁄₁₂</sup> ≈ 1.26, where as the exact ratio that one uses in
      just intonation is ⁵⁄₄ = 1.25. That's a difference you can easily hear already,
      although it's not too jarring (dissonant) to bother most people, especially since
      we are all very used to it.
      </p>
      <p class="helpAnswer">
      Note that it's very important for this work that you divide your octave into 12
      equal parts, and not say 11 or 13. Essentially, it's just a very fortunate
      coincidence that numbers like 2<sup>⁷⁄₁₂</sup> and 2<sup>⁴⁄₁₂</sup> happen to be
      very close to the simple ratios that sound consonant to us, so that the division of
      the octave to 12 equally spaced pitches produces tones that sound acceptably
      pleasant together.  Wikipedia has a
      <a href=https://en.wikipedia.org/wiki/Equal_temperament#/media/File:Equal_Temper_w_limits.svg>chart</a>
      that illustrates this coincidence really well.
      </p>
      <p class="helpQuestion">
      If the usual 12-EDO tuning system is just an approximation to just intonation,
      why are we using it? Why isn't everybody using just intonation?
      </p>
      <p class="helpAnswer">
      There are a few reasons for that. The 12-EDO tuning is extremely versatile,
      flexible, and fail-safe. For instance, all pairs of neighbouring tones in 12-EDO
      are always related to each other in exactly the same way: By a ratio of
      2<sup>¹⁄₁₂</sup>. This means that you can easily switch keys without retuning your
      instruments, and the instrument sounds exactly the same in any key. This isn't true
      at all in just intonation: In the example above, we built our tuning around the A
      at 440Hz. If you try to use the same set of tones generated from that to play music
      that is centered around some other tone (i.e. to play in another key), it's not
      going to work well.
      </p>
      <p class="helpAnswer">
      12-EDO also never has any <span class=emph>really</span> jarring intervals in it,
      but just intonation may. For instance, consider going up by three perfect fifths
      and a minor third, and then down by two octaves. In 12-EDO, you end up back where
      you started, for example
      C<sub>1</sub> → G<sub>1</sub> → D<sub>2</sub> → A<sub>2</sub> → C<sub>3</sub>
      → C<sub>1</sub>.
      In just intonation, this means going to a tone with a frequency ³⁄₂ ·
      ³⁄₂ · ³⁄₂ · ⁶⁄₅ · ½ · ½ = ⁸¹⁄₈₀ = 1.0125 times the original one you started from.
      That's almost 1.0, which would mean coming back to where you started, but off by
      just enough that the human ear can tell, and it sounds very, very dissonant and out
      of tune. (These kinds of problematic intervals are sometimes called "commas" when
      talking about tuning systems.)
      </p>
      <p class="helpAnswer">
      One final disadvantage of just intonation is that for many types of music you might
      want to play, you just need a lot of tones in your just intonation system. For
      instance, if you go up by two major thirds, you end up with a ratio of ²⁵⁄₁₆ ≈
      1.56; up a major sixth is ⁸⁄₅ = 1.6; and up a perfect fourth and down a major
      second is ¹²⁸⁄₈₁ ≈ 1.58. In 12-EDO all of these are approximated by the same tone
      with an interval of 2<sup>⁸⁄₁₂</sup> ≈ 1.59. That may be inaccurate in a sense, but
      from the point of view of building an actual instrument, it's quite a lot easier,
      when you don't have to build so many keys or frets (though this is something I hope
      technology like Jiboard can overcome). It also allows for all kinds of harmonic
      transitions and tricks, when you don't have to commit to saying whether the
      interval you are playing really is ⁸⁄₅ or ²⁵⁄₁₆, and can make use of this
      ambiguity.
      </p>
      <p class="helpAnswer">
      So the traditional 12-EDO tuning system isn't wrong, but it's a compromise. It
      gives up purity of harmony, that quality of being perfectly in tune, for many
      practical benefits.
      </p>
      <p class="helpQuestion">
      Okay, enough numbers and theory. How do I play this thing?
      </p>
      <p class="helpAnswer">
      Just click on any of the dots to play that tone. Poking them on a touch screen
      should also work, although some devices and browsers are better at handling this
      than others.
      </p>
      <p class="helpAnswer">
      On the left you can see three buttons, Drone (blue), Sustain (yellow), and Move
      (red), as well as their keyboard shortcuts. Sustain works like the sustain pedal of
      a piano: Trying holding it while playing. While holding the Drone button, you can
      click tones to turn them on, and they'll keep playing even if you let go of the
      Drone button. You need to hold Drone and click on them again to turn them off.
      Finally, the Move button activates the panning mode: Hold it down and
      click-and-drag to move around your view of the keyboard. The Settings tab also has
      sliders for zooming in and out.
      </p>
      <p class="helpAnswer">
      At the bottom, there's also a traditional 12-EDO piano keyboard, which may help
      orient yourself, and see how just intonation and 12-EDO compare. You can play it
      too, by clicking on the keys.
      </p>
      <p class="helpQuestion">
      What's the logic and meaning of how the dots/tones are laid out?
      </p>
      <p class="helpAnswer">
      The left-right axis corresponds to pitch, exactly like in a piano keyboard. So
      tones on the left are low pitch, the right is high pitch. If a dot is exactly above
      some piano key, then they have exactly the same pitch too. The grey vertical lines
      and the notches at the tops of the piano keys mark the exact positions.
      </p>
      <p class="helpAnswer">
      There's in principle an infinite number of tones in the just intonation system,
      even within one octave, so you can't just lay all of them next to each other like
      you do on a piano, which only has 12.  So what I've done is I've spread them out
      along the up-down axis. This is done in such a way, that one interval always
      corresponds to making the same kind of step on the screen regardless of where you
      start that interval from. So for example, if you find the triangle formed by the
      three tones in a major chord, e.g. ¹⁄₁, ⁵⁄₄ and ³⁄₂, then you can be certain that
      any triplet of notes anywhere on the screen that form a triangle of the same shape
      are also a major chord. And the same holds for any type of chord, with any number
      of tones: Same shape, same chord.
      </p>
      <p class="helpAnswer">
      More specifically, in the default layout (there are other layouts available in
      Settings), each band of tones that runs from bottom-left to top-right corresponds
      to moving up and down by perfect fifths (³⁄₂) and fourths (⁴⁄₃) only. Jumping to
      the band below means going up by a minor third (⁶⁄₅) and jumping to the band above
      corresponds to going up by a major third (⁵⁄₄).
      </p>
      <p class="helpAnswer">
      Finally, there's also the colours of the tones. The stronger the color, the simpler
      the harmonic relation between the root tone (¹⁄₁) and the given tone. So ²⁄₁ (an
      octave) is a very strong red, ⁵¹²⁄₄₀₅ is barely visible.
      </p>
      <p class="helpQuestion">
      Where should I start if I want to witness the difference between just intonation
      and 12-EDO?
      </p>
      <p class="helpAnswer">
      Try the following: Hold down Shift (or touch the Sustain bar if you don't have
      keyboard), and click on ¹⁄₁, ⁵⁄₄ (a bit above and right), and ³⁄₂ (further to the
      right). The three tones should now be playing at the same time, and they form the
      (just intonation) C major chord. Listen to its beautiful sound and vibration. Now
      release Shift and press it down again, and click on the corresponding piano keys
      directly below the tones you just played: C, E, and G. Now you're listening to the
      12-EDO version of the same C major. Notice how it sounds a bit wobbly or muddy in
      comparison? That's the difference between pure harmony and the 12-EDO approximation
      to it.
      </p>
      <p class="helpAnswer">
      You can also click on the ⁵⁄₄ by itself and then on the E on the piano keys below
      it. These are the just intonation and 12-EDO versions of the middle tone in the
      previous chord, and you can probably easily hear the difference. If you play them
      at the same time, you can hear the beating between them.
      </p>
      <p class="helpAnswer">
      If you get into it and spend a while studying the various interesting pure chords
      and intervals you can play, at some point I would also recommend go to the
      Settings, scrolling down to the sections called Tones, and trying the basic 7-limit
      preset. This adds more tones to the keyboard, and many of these are such that they
      just can't be even decently approximated in the 12-EDO system. Try for instance
      playing a chord with ¹⁄₁, ⁷⁄₆, and ³⁄₂. It's a beautiful sound, but one that is
      impossible to recreate on a piano, and simply absent from modern Western music.
      </p>
      <p class="helpQuestion">
      You mentioned the Settings tab a couple of times. What's that?
      </p>
      <p class="helpAnswer">
      It's the thing that pops out when you click on the ⚙ in the top-right corner.
      You'll find some simple things there, such as
      <ul>
        <li>vertical and horizontal zoom</li>
        <li>hiding/showing features like the 12-EDO keyboard</li>
        <li>how you want the tones to be labeled (fractions vs letters)</li>
        <li>presets for how the tones should be laid out</li>
      </ul>
      And if you dig deeper you'll find that you can customise almost anything:
      <ul>
        <li>add 7-based intervals to your tuning system, or 23-based if you want</li>
        <li>recolor the whole keyboard with the most distasteful neon shades you dare
          use</li>
        <li>change how harmonically-far-away tones are shown</li>
        <li>change the way the tones our laid out</li>
        <li>etc.</li>
      </ul>
      All the changes you make are written into the URL, so if you bookmark the page
      after you make changes, or copy-paste the URL, you can keep all the settings.
      </p>
      <p class="helpQuestion">
      This theory of tuning systems stuff seems pretty cool, I'm intrigued. How do I
      learn more?
      </p>
      <p class="helpAnswer">
      Wikipedia should obviously be your first stop, maybe read the articles on
      <a href=https://en.wikipedia.org/wiki/Equal_temperament>EDO tunings</a>
      (there are more than just 12-EDO) and
      <a href=https://en.wikipedia.org/wiki/Just_intonation>just intonation</a>
      to get started, and follow the links from there. Beyond that, I was greatly
      enlightened and inspired by the books of W. A. Mathieu: Bridge of Waves is a
      paperback popular audience intro to the topic, and Harmonic Experience is the hard
      cover hard core epic that you can spend years studying.
      </p>
      <p class="helpQuestion">
      Who made this?
      </p>
      <p class="helpAnswer">
      Jiboard was made me, Markus Hauru. If you have any feedback, questions, or feature
      requests, feel free to email
      <a href=mailto:markus@mhauru.org>markus@mhauru.org</a>.
      </p>
      <p class="helpAnswer">
      Inspiration for Jiboard came largely from talking to my friend Ismo Tähtinen, and
      from the books of W. A. Mathieu, which Ismo got me to read. He, and another friend
      of mine, Henri Seijo, also provided some great feedback.
      </p>
      <p class="helpAnswer">
      The implementation is all in Javascript, and available, free, on GitHub:
      <a href=https://github.com/mhauru/jiboard>github.com/mhauru/jiboard</a>.
      Special shout-out to the libraries
      <a href=https://rxjs.dev/>RxJS</a>,
      <a href=https://tonejs.github.io/>Tone.js</a>,
      and <a href=https://svgjs.com>SVG.js</a>,
      which Jiboard makes heavy use of.
      </p>
    </div>

    <h2 id="buttToggleHelp" class="unselectable buttonInactive"> ? </h2>

    <div id="divCanvas" class="unselectable"></div>

    <div id="divKeyCanvas" class="unselectable"></div>

    <div id="divMods" class="unselectable">
      <div id="divDroneMod" class="modButton divDroneModOff">
        <p class=modText>Drone<br>[Alt]</p>
      </div>
      <div id="divSustainMod" class="modButton divSustainModOff">
        <p class=modText>Sustain<br>[Shift]</p>
      </div>
      <div id="divPanMod" class="modButton divPanModOff">
        <p class=modText>Move<br>[Ctrl/Cmd]</p>
      </div>
    </div>

    <h2 id="buttToggleSettings" class="unselectable buttonInactive">
      ⚙
    </h2>
    <div id="divSettings">
      <h2 id="settingsHeader">Settings</h2>
      <div id="divSettingsInner">
        <div id="divGeneral" class="divSubSettings">
          <h3 id="headGeneral" class="headSubSettings">
            General
          </h3>
          <div id="contentGeneral">
            <p class=setting>
            <label> Horizontal zoom
              <input id="numHorzZoom" class="num" type="number" min="5" max="1000" step="5">
            </label>
            </p>

            <p class=setting>
            <label> Vertical zoom
              <input id="numVertZoom" class="num" type="number" min="5" max="1000" step="5">
            </label>
            </p>

            <p class=setting>
            <label> Root tone frequency
              <input id="numOriginFreq" class="num" type="number" min="20" max="20000" step="0.001">
              Hz
            </label>
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              The frequency of the root tone, i.e. ¹⁄₁.
              The default, 261.626 Hz, is the middle C of 12-EDO.
            </span>
            </p>

            <p class=setting>
            <label>
              Maximum harmonic norm
            </label>
            <input id="numMaxHarmNorm" type="number" class="num" min="0.1" max="100" step="0.1">
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              Harmonic norm measures the harmonic distance of each tone from the root
              tone. This is the maximum distance for which the tone is still added to
              the keyboard.
            </span>
            </p>

            <p class=setting>
            <label> Tone size
              <input id="numToneRadius" type="number" class="num" min="0.1" max="100" step="0.1">
            </label>
            </p>

            <p class=setting>
            <span> Tone labels</span>
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              The options are showing the name of the closest 12-EDO tone; the
              ratio with respect to the root tone as fraction; or the reduced fraction,
              meaning the fraction octave-shifted to be between ¹⁄₁ and ²⁄₁
              (so ⁸⁄₃ becomes ⁴⁄₃).
            </span>
            <br>
            <label class="radioIndent">
              <input id="radioToneLabelNone" type="radio" name="label" value="none">
              None
            </label>
            <br>
            <label class="radioIndent">
              <input id="radioToneLabelEDO" type="radio" name="label" value="EDO">
              12-EDO
            </label>
            <br>
            <label class="radioIndent">
              <input id="radioToneLabelFrac" type="radio" name="label" value="fractions">
              Fractions
            </label>
            <br>
            <label class="radioIndent">
              <input id="radioToneLabelRedFrac" type="radio" name="label"
                                                             value="reducedfractions">
              Reduced fractions
            </label>
            <br>
            </p>

            <p class=setting>
            <label> Show pitchlines
              <input id="cboxPitchlines" type="checkbox">
            </label>
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              Pitchlines are the vertical lines going through the centre of each tone.
              The left-right axis of the keyboard corresponds to pitch/frequency, and
              these lines mark the exact position of the tone. They can be compared
              with the little notches at the top of the keys in the 12-EDO keyboard,
              which mark the frequencies of the 12-EDO tones.
            </span>
            </p>

            <p class=setting>
            <label> Show 12-EDO keyboard
              <input id="cboxKeys" type="checkbox">
            </label>
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              That's the traditional piano keys at the bottom.
            </span>
            <br>
            </p>

            <p class=setting>
            <label> Minimum tone opacity
              <input id="numMinToneOpacity" class="num" type="number" min="0" max="1" step="0.01">
            </label>
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              The opacity of the tones is determined by their harmonic norm: The
              closer, harmonically speaking, the tone is to the root, the more opaque
              it is. This is the opacity given to the tone that is right at threshold
              of whether it's even included in the keyboard (see "maximum harmonic
              norm" above).
            </span>
            </p>
          </div>
        </div>

        <div id="divTones" class="divSubSettings">
          <h3 id="headTones" class="headSubSettings">
            Tones
          </h3>
          <div id="contentTones">
            <p class=setting>
            This section allows you to customise the way the keyboard is laid out, as
            well as adjusting which tones are drawn. If you dislike the way tones are
            divided into bands based on jumps of minor and major thirds, or want to add
            some 7-based tones to your keyboard, you are in the right place. For more
            information, click here:
            <button class="toggletipButton">
              ?
            </button>
            <span class="toggletipBubble">
              <span class=toggletipBubbleSubpar>
              Jiboard draws the keyboard by starting from the root tone ¹⁄₁, and taking
              steps by what are called generating intervals. For instance, if an octave,
              ²⁄₁, would be the only generating interval, then Jiboard would first
              generate the tones ²⁄₁ and ½, since they are one octave jump away from the
              root, then ⁴⁄₁ and ¼, and so on. If you would then add a second generating
              interval, say ³⁄₂ aka perfect fifth, then all tones that can be reached
              from the root by going up or down by any number of octaves or perfect
              fifths would be drawn.
              </span>
              <span class=toggletipBubbleSubpar>
              To avoid generating a humonguous number of tones, we also say that every
              step we take increases the tone's harmonic distance from the root. For
              instance, we might say that taking an octave-step increases the harmonic
              distance by 0.1, but taking a step of a perfect fifth increases it by 0.8.
              This would then give each tone a total harmonic distance from the root. We
              then put a limit on how harmonically-far-away tones are drawn (see "max
              harmonic norm" above), and also colour the more far-away tones more faintly
              (see "minimum tone opacity" above).  This way the more prominent tones are
              clearly visible, and the keyboard isn't cluttered with tones like
              ⁵³¹⁴⁴¹⁄₁₀₄₈₅₇₆ (12 perfect fifths up and 8 octaves down).
              </span>
              <span class=toggletipBubbleSubpar>
              The horizontal axis of the keyboard corresponds directly to pitch. The
              position on the vertical axis, however, is determined by the generating
              intervals: Each generating interval comes with a "y-shift", the distance by
              which we move up or down on the screen when we take a step by that
              generating interval. This guarantees that <span class=emph>shapes
                correspond to chords</span> on the screen. So for instance, four tones
              that form a maj7 chord are always positioned in exactly the same way
              relative to each other, regardless of what the root tone of the chord is.
              </span>
              <span class=toggletipBubbleSubpar>
              Below you can add new generating intervals, by entering the fraction that
              you want that interval to be and clicking Add. You can also remove any
              generating interval currently in use. And you can adjust the harmonic
              distance and y-shift associated to each interval.
              </span>
              <span class=toggletipBubbleSubpar>
              A word of warning: Some choices of parameters may lead to crazy numbers (up
              to and including infinity) of tones being generated, which will choke up
              your computer/phone/tablet. Be especially careful with setting a small
              value of harmonic distance to several generating intervals.
              </span>
              <span class=toggletipBubbleSubpar>
              Finally, you can't add new generating intervals that could be formed by
              combining the existing ones. For instance, if you already have the octave
              (²⁄₁) and perfect fifth (³⁄₂), then you can't add perfect fourth (⁴⁄₃),
              because that's just the same as going up an octave and down a perfect fifth
              (²⁄₁ / ³⁄₂ = ⁴⁄₃). That would simply be redundant and unnecessary (and mess
              up the way y-shifts and harmonic distances work).
              </span>
            </span>
            </p>
            <p class=setting>
            <label>Presets
              <select name="tone presets" id="selectTonePreset">
                <option value="basic5Limit">Basic 5-limit (default)</option>
                <option value="basic7Limit">Basic 7-limit</option>
                <option value="pythagorean">Pythagorean (3-limit)</option>
                <option value="alternative5Limit">Alternative 5-limit</option>
                <option value="alternative7Limit">Alternative 7-limit</option>
              </select>
            </label>
            <button id="buttApplyTonePreset" class="genIntButton">Apply</button>
            </p>
            <p class=setting>
            New generating interval<br>
            <input
              id="inNewGenIntNumerator"
              type="number"
              class="num"
              min="-100"
              max="100"
              step="1"
              style='width: 50px;'
              >
            /
            <input
              id="inNewGenIntDenominator"
              type="number"
              class="num"
              min="-100"
              max="100"
              step="1"
              style='width: 50px;'
              >
            <button id="buttAddGeneratingInterval" class="genIntButton">Add</button>
            <div id="contentAxes">
            </div>
          </div>
        </div>

        <div id="divStyle" class="divSubSettings">
          <h3 id="headStyle" class="headSubSettings">
            Aesthetics
          </h3>
          <div id="contentStyle">
          <p>
            <label> Tone color
              <input id="toneColor" type="color">
            </label><br>
            <label> Tone color when played
              <input id="toneColorActive" type="color">
            </label><br>
            <label> Root tone border color
              <input id="rootToneBorderColor" type="color">
            </label><br>
            <label> Root tone border size
              <input id="numRootToneBorderSize" type="number" class="num" min="0.0" max="10" step="0.01">
            </label>
          </p>

          <p>
            <label> Pitchline color
              <input id="colorPitchlines" type="color">
            </label><br>
            <label> Pitchline color when played
              <input id="colorPitchlinesActive" type="color">
            </label>
          </p>
          </div>
        </div>
      </div>
    </div>

    <script src="./jiboard.js"></script>
</body>
</html>
